import { useEffect, useState } from "react";

function QuizQuestion() {
  const [selectedOption, setSelectedOption] = useState("");
  const [timeLeft, setTimeLeft] = useState(10); // 10-second timer
  const [submitted, setSubmitted] = useState(false);

  const category = "Science";
  const question = "What is the chemical symbol for water?";
  const options = ["O2", "H2O", "CO2", "NaCl"];

  // Countdown Timer Logic
  useEffect(() => {
    if (submitted) return;

    if (timeLeft === 0) {
      handleSubmit();
      return;
    }

    const timer = setTimeout(() => {
      setTimeLeft((prev) => prev - 1);
    }, 1000);

    return () => clearTimeout(timer);
  }, [timeLeft, submitted]);

  const handleSubmit = () => {
    setSubmitted(true);
    alert(`Submitted: ${selectedOption || "No answer selected"}`);
    // You can call an API or navigate to the next question here
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-100 to-purple-600 flex items-center justify-center px-4">
      <div className="bg-purple-100 relative rounded-2xl shadow-2xl transform hover:scale-105 transition-transform p-8 w-full max-w-md">
        
        {/* Timer in Top-Right Corner */}
        <div className="absolute top-4 right-4 text-sm font-bold text-red-600 bg-white px-3 py-1 rounded-full shadow">
          Time Left: {timeLeft}s
        </div>

        {/* Category Name */}
        <h2 className="text-xl font-bold text-blue-700 mb-2">
          Category: {category}
        </h2>

        {/* Question */}
        <p className="text-lg font-semibold text-gray-800 mb-6">{question}</p>

        {/* Options */}
        <div className="space-y-4">
          {options.map((option, index) => (
            <label
              key={index}
              className={`block cursor-pointer px-4 py-3 rounded-lg border ${
                selectedOption === option
                  ? "bg-indigo-500 text-white border-indigo-700"
                  : "bg-white border-gray-300 hover:border-indigo-500"
              } transition duration-300`}
            >
              <input
                type="radio"
                name="quiz-option"
                value={option}
                className="hidden"
                checked={selectedOption === option}
                onChange={() => setSelectedOption(option)}
                disabled={submitted}
              />
              {option}
            </label>
          ))}
        </div>

        {/* Next Button */}
        {selectedOption && !submitted && (
          <button
            onClick={handleSubmit}
            className="mt-6 w-full bg-green-600 text-white font-semibold py-2 rounded-full hover:bg-green-700 transition"
          >
            Next
          </button>
        )}

        {/* Submission Message */}
        {submitted && (
          <p className="mt-4 text-center text-green-700 font-semibold">
            Answer Submitted!
          </p>
        )}
      </div>
    </div>
  );
}

export default QuizQuestion;
